<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Safety Spot</title>

    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üõ°Ô∏è</text></svg>">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>

<body>

    <!-- Loading -->
    <div id="loading-overlay" class="d-flex justify-content-center align-items-center">
        <div class="text-center">
            <div class="spinner-border text-success mb-3" role="status" style="width: 3rem; height: 3rem;">
                <span class="visually-hidden">Loading...</span>
            </div>
            <h5 id="loading-status-text" class="mb-1 fw-bold">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•...</h5>
            <p id="loading-sub-text" class="text-muted small">‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏≠‡∏™‡∏±‡∏Å‡∏Ñ‡∏£‡∏π‡πà</p>
        </div>
    </div>

    <!-- Registration -->
    <div id="registration-page" class="container py-4" style="display: none;">
        <div class="card shadow-sm border-0">
            <div class="card-body p-4">
                <h4 class="card-title text-center fw-bold mb-1">‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô</h4>
                <p class="text-center text-muted mb-4">‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô</p>
                <form id="registration-form">
                    <div class="mb-3">
                        <label class="form-label">‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•</label>
                        <input type="text" class="form-control" id="fullName" required>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">‡∏£‡∏´‡∏±‡∏™‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô</label>
                        <input type="text" class="form-control" id="employeeId" required>
                    </div>
                    <button type="submit" class="btn btn-primary w-100 fw-bold mt-3 py-2">‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô</button>
                </form>
            </div>
        </div>
    </div>

    <!-- Main App -->
    <div id="main-app" style="display: none;">
        <main class="container py-3 pb-5 mb-5">

            <!-- Home -->
            <div id="home-page" class="page active">
                <div id="user-header" class="d-flex align-items-center p-3 mb-4">
                    <img id="user-profile-pic" src="https://placehold.co/60x60" class="rounded-circle me-3">
                    <div>
                        <p id="user-employee-id" class="mb-0 text-muted small">‡∏£‡∏´‡∏±‡∏™: ...</p>
                        <h5 id="user-display-name" class="fw-bold mb-0">...</h5>
                    </div>
                    <div class="ms-auto text-end">
                        <h4 id="user-score" class="fw-bold text-primary mb-0">0</h4>
                        <small>‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô</small>
                    </div>
                </div>

                <h5 class="fw-bold mb-3">‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î</h5>
                <div id="latest-activities-list">
                    <p class="text-center text-muted">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°...</p>
                </div>
            </div>

            <!-- Activities -->
            <div id="activities-page" class="page">
                <h4 class="fw-bold mb-3">‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</h4>
                <div id="all-activities-list"></div>
            </div>

            <!-- Leaderboard -->
            <div id="leaderboard-page" class="page">
                <h4 class="fw-bold mb-3">‡∏Å‡∏£‡∏∞‡∏î‡∏≤‡∏ô‡∏ú‡∏π‡πâ‡∏ô‡∏≥</h4>
                <div id="leaderboard-list"></div>
                <div id="leaderboard-loading" class="text-center my-5">
                    <div class="spinner-border"></div>
                </div>
                <div id="leaderboard-load-more-container" class="text-center mt-3" style="display:none;">
                    <button id="leaderboard-load-more-btn" class="btn btn-outline-secondary">‡πÇ‡∏´‡∏•‡∏î‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°</button>
                </div>
            </div>

            <!-- Profile Page -->
            <div id="profile-page" class="page">
                <div class="card profile-card border-0">
                    <div class="card-body text-center p-4">

                        <img id="profile-page-pic" src="https://placehold.co/80x80"
                             class="rounded-circle border border-3 mb-3">

                        <h4 id="profile-page-name" class="fw-bold">...</h4>
                        <p id="profile-page-employee-id" class="text-muted">‡∏£‡∏´‡∏±‡∏™‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô: ...</p>

                        <p class="text-muted mb-4">
                            ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏™‡∏∞‡∏™‡∏°: 
                            <span id="profile-page-score" class="fw-bold text-success">0</span>
                        </p>

                        <div class="card border-0 bg-light p-3 mb-4">
                            <div class="d-flex justify-content-around text-center">
                                <div>
                                    <p class="fs-2 fw-bold text-success lh-1 mb-1">2</p>
                                    <small class="text-muted fw-bold">‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô Safety Spot</small>
                                </div>
                                <div class="fs-3 text-muted"><i class="fas fa-exchange-alt"></i></div>
                                <div>
                                    <p class="fs-2 fw-bold text-primary lh-1 mb-1">1</p>
                                    <small class="text-muted fw-bold">‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô Royal Point</small>
                                </div>
                            </div>
                        </div>

                        <h6 class="fw-bold text-start">‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏∑‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏™‡∏π‡πà‡∏õ‡πâ‡∏≤‡∏¢‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•‡∏ñ‡∏±‡∏î‡πÑ‡∏õ</h6>
                        <div class="progress mb-1" style="height:20px;">
                            <div id="progress-bar" class="progress-bar progress-bar-striped"
                                style="width:0%;">0%</div>
                        </div>
                        <small id="progress-text" class="text-muted"></small>

                        <hr>
                        <h5 class="fw-bold mb-3">‡∏õ‡πâ‡∏≤‡∏¢‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•‡∏Ç‡∏≠‡∏á‡∏â‡∏±‡∏ô</h5>
                        <div id="badges-container" class="badges-grid"></div>

                    </div>
                </div>
            </div>
            <!-- Admin Page -->
            <div id="admin-page" class="page">
                <h4 class="fw-bold mb-3">Dashboard</h4>

                <div class="row g-3 mb-4">
                    <div class="col-12 col-md-4">
                        <div class="card text-white bg-warning shadow-sm">
                            <div class="card-body">
                                <h4 id="stat-pending-count" class="card-title mb-0">-</h4>
                                <p class="card-text small">‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏£‡∏≠‡∏ï‡∏£‡∏ß‡∏à</p>
                            </div>
                        </div>
                    </div>

                    <div class="col-6 col-md-4">
                        <div class="card bg-light shadow-sm">
                            <div class="card-body">
                                <h4 id="stat-user-count" class="card-title mb-0">-</h4>
                                <p class="card-text small">‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</p>
                            </div>
                        </div>
                    </div>

                    <div class="col-6 col-md-4">
                        <div class="card bg-light shadow-sm">
                            <div class="card-body">
                                <h4 id="stat-activities-count" class="card-title mb-0">-</h4>
                                <p class="card-text small">‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡∏ó‡∏µ‡πà Active</p>
                            </div>
                        </div>
                    </div>
                </div>

                <h5 class="fw-bold mb-3">Quick Actions</h5>

                <div class="list-group">
                    <a href="#" id="manage-reports-btn" class="list-group-item list-group-item-action d-flex justify-content-between align-items-center">
                        <span><i class="fas fa-inbox me-2"></i> ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô</span>
                        <span class="badge bg-warning rounded-pill" id="quick-action-pending-count">0</span>
                    </a>
                    <a href="#" id="manage-activities-btn" class="list-group-item list-group-item-action">
                        <i class="fas fa-tasks me-2"></i> ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°
                    </a>
                    <a href="#" id="manage-badges-btn" class="list-group-item list-group-item-action">
                        <i class="fas fa-certificate me-2"></i> ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡πÅ‡∏•‡∏∞‡∏õ‡πâ‡∏≤‡∏¢‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•
                    </a>
                    <a href="#" id="view-stats-btn" class="list-group-item list-group-item-action">
                        <i class="fas fa-chart-line me-2"></i> ‡∏î‡∏π‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏£‡∏∏‡∏õ (Dashboard ‡πÄ‡∏Å‡πà‡∏≤)
                    </a>
                </div>
            </div>

        </main>

        <!-- Bottom Navigation -->
        <nav class="navbar navbar-light bg-white fixed-bottom bottom-nav">
            <div class="container-fluid d-flex justify-content-around">

                <a href="#home" class="nav-link active text-center" data-page="home-page">
                    <i class="fas fa-home fs-4"></i>
                    <div style="font-size:0.7rem;">‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å</div>
                </a>

                <a href="#activities" class="nav-link text-center" data-page="activities-page">
                    <i class="fas fa-tasks fs-4"></i>
                    <div style="font-size:0.7rem;">‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°</div>
                </a>

                <a href="#" id="notification-bell" class="nav-link text-center position-relative">
                    <i class="fas fa-bell fs-4"></i>
                    <span id="notification-badge"
                          class="position-absolute top-0 start-100 translate-middle p-1 bg-danger border border-light rounded-circle"
                          style="display:none;"></span>
                    <div style="font-size:0.7rem;">‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô</div>
                </a>

                <a href="#leaderboard" class="nav-link text-center" data-page="leaderboard-page">
                    <i class="fas fa-trophy fs-4"></i>
                    <div style="font-size:0.7rem;">‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö</div>
                </a>

                <a href="#profile" class="nav-link text-center" data-page="profile-page">
                    <i class="fas fa-user fs-4"></i>
                    <div style="font-size:0.7rem;">‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå</div>
                </a>

                <!-- Admin floating nav -->
                <a href="#admin" id="admin-nav-item"
                   class="nav-link text-center"
                   data-page="admin-page"
                   style="display:none; position:absolute; right:10px; bottom:80px;">
                    <i class="fas fa-user-shield fs-3 p-3 bg-primary text-white rounded-circle shadow"></i>
                </a>
            </div>
        </nav>
    </div>

    <!-- Submission Modal -->
    <div class="modal fade" id="submission-modal" tabindex="-1">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">

                <div class="modal-header">
                    <h5 class="modal-title">‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡πà‡∏ß‡∏°‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°</h5>
                    <button class="btn-close" data-bs-dismiss="modal"></button>
                </div>

                <div class="modal-body">
                    <form id="submission-form">
                        <input type="hidden" id="activityId-input">
                        <h5 id="activity-title-modal" class="fw-bold mb-3"></h5>

                        <div class="mb-3">
                            <label class="form-label">‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏à‡∏∏‡∏î‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á</label>
                            <textarea id="description-input" class="form-control" rows="4" required></textarea>
                        </div>

                        <div id="image-upload-section">
                            <label class="form-label">‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û</label>
                            <input type="file" id="image-input" class="form-control" accept="image/*">

                            <div class="image-preview-container mt-3">
                                <img id="submission-image-preview"
                                     src="https://placehold.co/400x300/e9ecef/6c757d?text=Preview"
                                     class="image-preview">
                            </div>
                        </div>

                        <button class="btn btn-primary w-100 mt-3 fw-bold">‡∏™‡πà‡∏á‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô</button>
                    </form>
                </div>

            </div>
        </div>
    </div>

    <!-- Admin Reports Modal -->
    <div class="modal fade" id="admin-reports-modal" tabindex="-1">
        <div class="modal-dialog modal-fullscreen">
            <div class="modal-content">
                <div class="modal-header">
                    <h5>‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô (<span id="pending-count-modal">0</span>)</h5>
                    <button class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div id="admin-reports-container" class="container-fluid px-0"></div>
                    <div id="reports-loading" class="text-center my-4" style="display:none;">
                        <div class="spinner-border"></div>
                    </div>
                    <div id="no-reports-message" class="text-center my-4 text-muted" style="display:none;">
                        ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡∏£‡∏≠‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Admin Activities Modal -->
    <div class="modal fade" id="admin-activities-modal" tabindex="-1">
        <div class="modal-dialog modal-fullscreen">
            <div class="modal-content">

                <div class="modal-header">
                    <h5>‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°</h5>
                    <button class="btn-close" data-bs-dismiss="modal"></button>
                </div>

                <div class="modal-body">
                    <button id="create-activity-btn" class="btn btn-success mb-3">
                        <i class="fas fa-plus"></i> ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡πÉ‡∏´‡∏°‡πà
                    </button>

                    <div id="activities-list-admin"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Activity Form Modal -->
    <div class="modal fade" id="activity-form-modal" tabindex="-1">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">

                <div class="modal-header">
                    <h5 id="activity-form-title">‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡πÉ‡∏´‡∏°‡πà</h5>
                    <button class="btn-close" data-bs-dismiss="modal"></button>
                </div>

                <div class="modal-body">

                    <form id="activity-form">
                        <input type="hidden" id="form-activity-id">

                        <div class="mb-3">
                            <label class="form-label">‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠</label>
                            <input type="text" id="form-activity-title" class="form-control" required>
                        </div>

                        <div class="mb-3">
                            <label class="form-label">‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢</label>
                            <textarea id="form-activity-desc" rows="3" class="form-control" required></textarea>
                        </div>

                        <div class="mb-3">
                            <label class="form-label">‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°</label>
                            <input type="file" id="form-activity-image-input" class="form-control" accept="image/*">

                            <div class="image-preview-container mt-2">
                                <img id="activity-image-preview"
                                     src="https://placehold.co/400x300/e9ecef/6c757d?text=Preview"
                                     class="image-preview">
                            </div>

                            <input type="hidden" id="form-activity-image-url">
                        </div>

                        <div class="form-check form-switch mb-3">
                            <input type="checkbox" class="form-check-input" id="image-required-toggle" checked>
                            <label class="form-check-label">‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö‡πÅ‡∏ô‡∏ö‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û</label>
                        </div>

                        <button class="btn btn-primary w-100">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</button>

                    </form>
                </div>

            </div>
        </div>
    </div>

    <!-- Activity Detail Modal -->
    <div class="modal fade" id="activity-detail-modal" tabindex="-1">
        <div class="modal-dialog modal-fullscreen">
            <div class="modal-content">

                <div class="modal-header">
                    <h5 id="activity-detail-title">...</h5>
                    <button class="btn-close" data-bs-dismiss="modal"></button>
                </div>

                <div class="modal-body bg-light">
                    <div id="submissions-container" class="container-fluid"></div>
                    <div id="submissions-loading" class="text-center my-5">
                        <div class="spinner-border text-success"></div>
                    </div>
                </div>

                <div class="modal-footer">
                    <button class="btn btn-secondary w-100" data-bs-dismiss="modal">‡∏õ‡∏¥‡∏î</button>
                </div>

            </div>
        </div>
    </div>

    <!-- Image Viewer -->
    <div class="modal fade" id="imageViewerModal" tabindex="-1">
        <div class="modal-dialog modal-dialog-centered modal-lg">
            <div class="modal-content">

                <div class="modal-header">
                    <h5 id="imageViewerModalLabel">‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°</h5>
                    <button class="btn-close" data-bs-dismiss="modal"></button>
                </div>

                <div class="modal-body text-center p-0">
                    <img id="imageViewerContent"
                         src=""
                         class="img-fluid"
                         style="max-height:80vh; width:auto;">
                </div>

                <div class="modal-footer justify-content-center">
                    <button class="btn btn-secondary" data-bs-dismiss="modal">‡∏õ‡∏¥‡∏î</button>
                    <a id="downloadImageBtn" class="btn btn-primary" download>
                        <i class="fas fa-download me-2"></i> ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û
                    </a>
                </div>

            </div>
        </div>
    </div>

    <!-- Admin Stats Modal -->
    <div class="modal fade" id="admin-stats-modal" tabindex="-1">
        <div class="modal-dialog modal-dialog-centered modal-lg">
            <div class="modal-content">

                <div class="modal-header">
                    <h5>‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏£‡∏∏‡∏õ Dashboard</h5>
                    <button class="btn-close" data-bs-dismiss="modal"></button>
                </div>

                <div class="modal-body">
                    <canvas id="reportsChart"></canvas>

                    <div id="stats-container" class="row g-3 mt-3"></div>

                    <div id="stats-loading" class="text-center my-4">
                        <div class="spinner-border"></div>
                    </div>
                </div>

            </div>
        </div>
    </div>

    <!-- Manage Badges Modal -->
    <div class="modal fade" id="admin-manage-badges-modal" tabindex="-1">
        <div class="modal-dialog modal-fullscreen">
            <div class="modal-content">

                <div class="modal-header">
                    <h5>‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡πÅ‡∏•‡∏∞‡∏õ‡πâ‡∏≤‡∏¢‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•</h5>
                    <button class="btn-close" data-bs-dismiss="modal"></button>
                </div>

                <div class="modal-body">

                    <!-- Tabs -->
                    <ul class="nav nav-tabs mb-4">
                        <li class="nav-item">
                            <a class="nav-link active admin-tab-btn" data-tab="manageBadges" href="#">‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏õ‡πâ‡∏≤‡∏¢‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link admin-tab-btn" data-tab="manageUsers" href="#">‡∏°‡∏≠‡∏ö‡∏õ‡πâ‡∏≤‡∏¢‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•‡πÉ‡∏´‡πâ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ</a>
                        </li>
                    </ul>

                    <!-- Manage Badges -->
                    <div id="manageBadgesTab" class="admin-tab-content active">
                        <button id="add-badge-btn" class="btn btn-success mb-3">
                            <i class="fas fa-plus"></i> ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏õ‡πâ‡∏≤‡∏¢‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•‡πÉ‡∏´‡∏°‡πà
                        </button>

                        <div id="badges-list" class="row"></div>
                    </div>

                    <!-- Manage Users -->
                    <div id="manageUsersTab" class="admin-tab-content" style="display:none;">

                        <div class="mb-3">
                            <input type="text" id="user-search-input" class="form-control"
                                   placeholder="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏î‡πâ‡∏ß‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡∏´‡∏£‡∏∑‡∏≠‡∏£‡∏´‡∏±‡∏™‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô...">
                        </div>

                        <div class="d-flex align-items-center mb-3">
                            <small class="text-muted me-2">‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏ï‡∏≤‡∏°:</small>

                            <div class="btn-group btn-group-sm" role="group">
                                <button class="btn btn-outline-secondary btn-sort active" data-sort="score">
                                    <i class="fas fa-star me-1"></i> ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î
                                </button>
                                <button class="btn btn-outline-secondary btn-sort" data-sort="name">
                                    <i class="fas fa-font me-1"></i> ‡∏ä‡∏∑‡πà‡∏≠ (‡∏Å-‡∏Æ)
                                </button>
                                <button class="btn btn-outline-secondary btn-sort" data-sort="newest">
                                    <i class="fas fa-user-clock me-1"></i> ‡πÉ‡∏´‡∏°‡πà‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î
                                </button>
                            </div>
                        </div>

                        <div id="user-search-results"></div>

                        <div id="users-load-more-container"
                             class="text-center mt-3"
                             style="display:none;">
                            <button id="users-load-more-btn" class="btn btn-outline-secondary">
                                ‡πÇ‡∏´‡∏•‡∏î‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°
                            </button>
                        </div>

                    </div>
                </div>

            </div>
        </div>
    </div>

    <!-- User Details (Badges + Score Editor) -->
    <div class="modal fade" id="user-details-modal" tabindex="-1">
        <div class="modal-dialog modal-dialog-centered modal-lg">
            <div class="modal-content">

                <div class="modal-header">
                    <h5 id="user-details-modal-title">‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏õ‡πâ‡∏≤‡∏¢‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•</h5>
                    <button class="btn-close" data-bs-dismiss="modal"></button>
                </div>

                <div class="modal-body">

                    <!-- User Info -->
                    <div class="text-center mb-3">
                        <img id="user-details-pic"
                             src="https://placehold.co/60x60"
                             class="rounded-circle mb-2"
                             width="60" height="60">

                        <h5 id="user-details-name" class="fw-bold mb-0"></h5>
                        <small id="user-details-info" class="text-muted"></small>
                    </div>

                    <hr class="mt-3">

                    <!-- Score Editing Panel (Admin Only) -->
                    <div id="admin-score-box" class="mt-4" style="display:none;">
                        <h6 class="fw-bold mb-3">
                            <i class="fas fa-star text-warning me-2"></i> ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ
                        </h6>

                        <div class="mb-2">
                            ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô:
                            <span id="adminUserCurrentScore" class="fw-bold text-primary">0</span>
                            ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô
                        </div>

                        <div class="btn-group w-100 mb-3" role="group">
                            <input type="radio" class="btn-check" name="adminScoreMode" id="modeAdd" value="add" checked>
                            <label class="btn btn-outline-success" for="modeAdd">
                                <i class="fas fa-plus"></i> ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô
                            </label>

                            <input type="radio" class="btn-check" name="adminScoreMode" id="modeSub" value="sub">
                            <label class="btn btn-outline-danger" for="modeSub">
                                <i class="fas fa-minus"></i> ‡∏´‡∏±‡∏Å‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô
                            </label>
                        </div>

                        <div class="input-group mb-3">
                            <input type="number" id="adminScoreDeltaInput" class="form-control" placeholder="‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô" min="1">
                            <button id="adminApplyScoreBtn" class="btn btn-primary">
                                <span id="adminScoreBtnText">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô</span>
                                <span id="adminScoreBtnLoading" class="spinner-border spinner-border-sm d-none"></span>
                            </button>
                        </div>

                        <small class="text-muted">‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡πâ‡∏≤‡∏¢‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•‡∏ï‡∏≤‡∏°‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î‡πÉ‡∏´‡πâ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥</small>
                    </div>

                    <hr class="my-4">

                    <div id="user-details-badges-container">
                        <div class="text-center">
                            <div class="spinner-border"></div>
                        </div>
                    </div>

                </div>

            </div>
        </div>
    </div>
    <!-- Notification Modal -->
    <div class="modal fade" id="notification-modal" tabindex="-1">
        <div class="modal-dialog modal-fullscreen">
            <div class="modal-content">

                <div class="modal-header">
                    <h5 class="modal-title">‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô</h5>
                    <button class="btn-close" data-bs-dismiss="modal"></button>
                </div>

                <div id="notification-list-container" class="modal-body p-0">
                    <div class="text-center my-5">
                        <div class="spinner-border"></div>
                    </div>
                </div>

            </div>
        </div>
    </div>

    <!-- Vendor Scripts -->
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"
            integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo="
            crossorigin="anonymous"></script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

    <script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>

    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <link rel="stylesheet"
          href="https://unpkg.com/pulltorefreshjs@0.1.22/dist/index.css">

    <script src="https://unpkg.com/pulltorefreshjs@0.1.22/dist/index.umd.js"></script>

    <!-- Main App Script -->
    <script src="app.js"></script>

</body>
</html>
